<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise Funcional Automática</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden">Carregando...</span>
        </div>
        <p>Analisando texto... Isso pode levar alguns minutos.</p>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <i class="fas fa-project-diagram navbar-icon-style"></i><a class="navbar-brand" href="#">Análise de Rede Comportamental</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/new"><i class="fas fa-file-alt"></i> Nova Análise</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/explanation"><i class="fas fa-info-circle"></i> Explicação</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/examples"><i class="fas fa-th-list"></i> Exemplos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-8">
                <p class="lead">Nova Análise</p>
                
                <form action="/analise" method="POST">
                    <div class="mb-3">
                        <textarea class="form-control mb-1" name="texto_entrada" rows="10" cols="80" placeholder="Insira aqui o texto que servirá de base para a análise funcional." maxlength="2000"></textarea>
                        <div id="charCountIndex" class="text-end text-muted">0/2000 caracteres</div>
                    </div>
                    <div class="d-grid gap-2 col-6 mx-auto mb-3 ">
                        <button type="submit" class="btn btn-primary">Analisar Texto</button>
                    </div>
                </form>
                <div class="row">
                    <div class="alert alert-warning" role="alert">
                        <strong>Atenção:</strong> Os modelos de inteligência artificial são imprecisos e podem cometer erros em suas análises. Os resultados desta ferramenta não devem ser usados em situações reais. Além disso, evite inserir dados sigilosos, pois as informações são enviadas para os servidores do Google e podem ser utilizadas para o treinamento dos modelos de linguagem.
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                      Sobre
                    </div>
                    <div class="card-body">
                        <p class="card-text mb-2">Esta ferramenta tem como objetivo gerar uma rede comportamental a partir de um texto narrativo, auxiliando na análise e visualização de interações e padrões.</p>
                        <p class="card-text">Para entender melhor como funciona, consulte a página de <a href="/explanation">Explicação</a>. Se desejar ver exemplos práticos, visite a página de <a href="/examples">Exemplos</a>.</p>
                        <hr class="my-3">
                        <p class="card-text"><strong>Andrey Alvarenga Duarte</strong><br>
                        <a href="mailto:andreyduarte.aad@gmail.com">andreyduarte.aad@gmail.com</a><br>
                        GitHub: <a href="https://github.com/andreyduarte/AutoAnaliseFuncional" target="_blank">AutoAnáliseFuncional</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Lógica para o contador de caracteres no textarea
        const analysisTextareaIndex = document.querySelector('textarea[name="texto_entrada"]');
        const charCountIndex = document.getElementById('charCountIndex');
        const maxLengthIndex = analysisTextareaIndex.getAttribute('maxlength');

        function updateCharCountIndex() {
            const currentLength = analysisTextareaIndex.value.length;
            charCountIndex.innerText = `${currentLength}/${maxLengthIndex} caracteres`;
        }

        analysisTextareaIndex.addEventListener('input', updateCharCountIndex);

        // Inicializa o contador ao carregar a página
        document.addEventListener('DOMContentLoaded', updateCharCountIndex);

        document.querySelector('form').addEventListener('submit', function() {
            document.getElementById('loadingOverlay').classList.add('visible');
        });
    </script>
</body>
</html>
